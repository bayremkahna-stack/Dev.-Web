<div class="game-container" *ngIf="!jeuTermine">
  <!-- DÃ©fi 2: Affichage en temps rÃ©el des bonnes/mauvaises rÃ©ponses -->
  <app-score 
    [score]="score" 
    [bonnesReponses]="bonnesReponses" 
    [mauvaisesReponses]="mauvaisesReponses"
    [tempsRestant]="tempsRestant">
  </app-score>

  <!-- Progression du quiz -->
  <div class="progression">
    <p>Question {{ questionActuelle + 1 }} / {{ questions.length }}</p>
    <div class="progress-bar">
      <div class="progress-fill" [style.width.%]="((questionActuelle + 1) / questions.length) * 100"></div>
    </div>
  </div>

  <!-- Affichage de la question actuelle -->
  <div class="question-container" *ngIf="getCurrentQuestion()">
    <h2>{{ getCurrentQuestion().question }}</h2>

    <!-- Options de rÃ©ponse avec boutons -->
    <div class="options-container">
      <button 
        *ngFor="let option of getCurrentQuestion().options"
        class="option-btn"
        [ngClass]="{
          'correct': isCorrectOption(option, getCurrentQuestion()),
          'wrong': isWrongOption(option, getCurrentQuestion()),
          'disabled': getCurrentQuestion().repondu
        }"
        (click)="onSelectOption(option, getCurrentQuestion())"
        [disabled]="getCurrentQuestion().repondu">
        {{ option }}
      </button>
    </div>

    <!-- Two-Way Data Binding: Champ de saisie directe (optionnel) -->
    <div class="direct-answer" *ngIf="!getCurrentQuestion().repondu">
      <h3>Ou tapez votre rÃ©ponse directement :</h3>
      <div class="input-group">
        <input 
          type="text" 
          [(ngModel)]="reponseSaisie" 
          placeholder="Entrez votre rÃ©ponse..."
          (keyup.enter)="validerReponseSaisie(getCurrentQuestion())">
        <button 
          class="btn-valider" 
          (click)="validerReponseSaisie(getCurrentQuestion())"
          [disabled]="!reponseSaisie">
          Valider
        </button>
      </div>
      <p class="hint">Valeur actuelle: {{ reponseSaisie }}</p>
    </div>

    <!-- Message aprÃ¨s rÃ©ponse -->
    <div class="feedback" *ngIf="getCurrentQuestion().repondu">
      <p *ngIf="getCurrentQuestion().reponseChoisie === getCurrentQuestion().reponse" class="correct-msg">
        âœ… Correct ! Bonne rÃ©ponse !
      </p>
      <p *ngIf="getCurrentQuestion().reponseChoisie !== getCurrentQuestion().reponse" class="wrong-msg">
        âŒ Incorrect ! La bonne rÃ©ponse Ã©tait: {{ getCurrentQuestion().reponse }}
      </p>
    </div>
  </div>
</div>

<!-- Ã‰cran de fin de jeu -->
<div class="game-over" *ngIf="jeuTermine">
  <h1>ğŸ‰ Quiz TerminÃ© !</h1>
  
  <div class="final-score">
    <h2>Votre Score Final</h2>
    <div class="score-display">{{ score }} points</div>
    
    <div class="stats">
      <div class="stat-item">
        <span class="stat-label">âœ… Bonnes rÃ©ponses:</span>
        <span class="stat-value">{{ bonnesReponses }}</span>
      </div>
      <div class="stat-item">
        <span class="stat-label">âŒ Mauvaises rÃ©ponses:</span>
        <span class="stat-value">{{ mauvaisesReponses }}</span>
      </div>
      <div class="stat-item">
        <span class="stat-label">ğŸ“Š Taux de rÃ©ussite:</span>
        <span class="stat-value">{{ (bonnesReponses / questions.length * 100).toFixed(0) }}%</span>
      </div>
    </div>
  </div>

  <button class="btn-recommencer" (click)="recommencer()">
    ğŸ”„ Recommencer le Quiz
  </button>
</div>
