<div class="book-list">
  <!-- Barre de recherche -->
  <div class="search-section">
    <label for="search">Rechercher :</label>
    <input
      id="search"
      type="text"
      placeholder="Titre, auteur ou cat√©gorie..."
      [ngModel]="searchTerm()"
      (ngModelChange)="onSearchChange($event)"
      class="search-input">
  </div>

  <!-- Contr√¥les de tri -->
  <div class="sort-section">
    <span>Trier par :</span>
    <button 
      class="sort-btn" 
      [class.active]="sortBy() === 'title'"
      (click)="onSortChange('title')">
      Titre
      @if (sortBy() === 'title') {
        <span class="sort-arrow">{{ sortDirection() === 'asc' ? '‚Üë' : '‚Üì' }}</span>
      }
    </button>
    <button 
      class="sort-btn" 
      [class.active]="sortBy() === 'category'"
      (click)="onSortChange('category')">
      Cat√©gorie
      @if (sortBy() === 'category') {
        <span class="sort-arrow">{{ sortDirection() === 'asc' ? '‚Üë' : '‚Üì' }}</span>
      }
    </button>
    <button 
      class="sort-btn" 
      [class.active]="sortBy() === 'isAvailable'"
      (click)="onSortChange('isAvailable')">
      Disponibilit√©
      @if (sortBy() === 'isAvailable') {
        <span class="sort-arrow">{{ sortDirection() === 'asc' ? '‚Üë' : '‚Üì' }}</span>
      }
    </button>
  </div>

  <!-- Table des livres -->
  @if (filteredBooks.length === 0) {
    <div class="no-books">
      @if (searchTerm()) {
        <p>Aucun livre ne correspond √† votre recherche.</p>
      } @else {
        <p>Aucun livre dans la liste.</p>
      }
    </div>
  } @else {
    <table class="books-table">
      <thead>
        <tr>
          <th>Titre</th>
          <th>Auteur</th>
          <th>Cat√©gorie</th>
          <th>Date</th>
          <th>Disponible</th>
          <th>Stock</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        @for (book of filteredBooks; track book.id) {
          <tr [class.unavailable]="!book.isAvailable">
            <td class="book-title">{{ book.title }}</td>
            <td class="book-author">{{ book.author }}</td>
            <td class="book-category">
              <span class="category-badge" [attr.data-category]="book.category">
                {{ book.category }}
              </span>
            </td>
            <td class="book-date">{{ book.releaseDate | date:'dd/MM/yyyy' }}</td>
            <td class="book-availability">
              @if (book.isAvailable) {
                <span class="availability-badge available">‚úì Disponible</span>
              } @else {
                <span class="availability-badge unavailable">‚úó Indisponible</span>
              }
            </td>
            <td class="book-stock">
              @if (book.stock !== undefined) {
                <span 
                  class="stock-badge"
                  [class.low-stock]="book.stock > 0 && book.stock <= 5"
                  [class.out-of-stock]="book.stock === 0">
                  {{ book.stock }}
                </span>
              } @else {
                <span class="stock-badge">N/A</span>
              }
            </td>
            <td class="book-actions">
              <button 
                class="btn btn-edit" 
                (click)="editBook(book)"
                title="Modifier">
                ‚úèÔ∏è
              </button>
              <button 
                class="btn btn-delete" 
                (click)="deleteBook(book.id)"
                title="Supprimer">
                üóëÔ∏è
              </button>
            </td>
          </tr>
        }
      </tbody>
    </table>
  }
</div>
